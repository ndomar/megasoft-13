<% if (@page.valid?) %>
	<% if (@need_to_show_page) %>
		var designPage = document.getElementById('designpage');
		var html = "<%= @page.html %>";
		var id = <%= @page.id %>
		designPage.innerHTML="";
		html=html.replace( "onclick", "onclickevent" , 'g');
		html=html.replace( "onmouseover", "onhoverevent" , 'g');
		// @page.html = html;
		$('<%= escape_javascript(render "showPage")%>').appendTo('#designpage')
		designPage.setAttribute("data-pageid", id);
		applyInterfaces();
		//this is Malatawy's method to be able to drag and drop after saving
	<% end %>

	//render show versions to show page commits
	$('#versions-scroll').empty();
	$('<%= escape_javascript(render "show_versions")%>').appendTo('#versions-scroll');

<% else %>
<% end %>